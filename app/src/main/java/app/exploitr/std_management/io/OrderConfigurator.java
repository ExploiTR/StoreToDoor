package app.exploitr.std_management.io;

import android.content.Context;
import android.widget.Toast;

import com.google.firebase.firestore.SetOptions;

import java.util.HashMap;
import java.util.Map;

import app.exploitr.storetodoor.functions.majors.DatabaseConstants;

public class OrderConfigurator {

	public static void confirmOrder(Context context, String user_uid, String order_number) {
		Map<String, Object> map = new HashMap<>();
		map.put(DatabaseConstants.ORDER_STATE, DatabaseConstants.ORDER_STATE_ACCEPTED);
		DatabaseConstants.getFDB()
				.collection(DatabaseConstants.MAIN_ORDERS)
				.document(user_uid)
				.collection(DatabaseConstants.ORDER_DATA_ACCESS_STRING)
				.document(order_number)
				.set(map, SetOptions.merge())
				.addOnSuccessListener(unused -> Toast.makeText(context, "Order confirmed!", Toast.LENGTH_SHORT).show())
				.addOnFailureListener(e -> Toast.makeText(context, "Order confirmation FAILED!", Toast.LENGTH_SHORT).show());
	}

	public static void updateOrderStatus(Context context, String user_uid,String reg_no, String order_number, int status) {
		Map<String, Object> map = new HashMap<>();
		map.put(DatabaseConstants.ORDER_STATE, status);
		DatabaseConstants.getFDB()
				.collection(DatabaseConstants.MAIN_ORDERS)
				.document(user_uid)
				.collection(DatabaseConstants.ORDER_DATA_ACCESS_STRING)
				.document(order_number)
				.set(map, SetOptions.merge())
				.addOnSuccessListener(unused -> Toast.makeText(context, "Order status updated!", Toast.LENGTH_SHORT).show())
				.addOnFailureListener(e -> Toast.makeText(context, "Order status update FAILED!", Toast.LENGTH_SHORT).show());
	}
}
